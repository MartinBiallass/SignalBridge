{% extends "base.html" %}

{% block title %}Meine Zahlungen{% endblock %}

{% block content %}
<h1>ğŸ’³ ZahlungsÃ¼bersicht</h1>

<p>ğŸ‘¤ Angemeldet als: <strong>{{ user.username if user else 'Gast' }}</strong></p>

<!-- Anzeige der Bestellungen -->
{% if orders %}
    <table class="table table-dark table-striped">
        <thead>
            <tr>
                <th>Bestell-ID</th>
                <th>Abo</th>
                <th>Preis</th>
                <th>Status</th>
                <th>Zahlungsdatum</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.subscription }}</td>
                <td>{{ order.price }}â‚¬</td>
                <td>{{ order.status }}</td>
                <td>{{ order.paid_at.strftime('%Y-%m-%d %H:%M:%S') if order.paid_at else 'Nicht bezahlt' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>ğŸ”” Du hast noch keine Zahlungen.</p>
{% endif %}

<!-- Zahlungs-Mockup -->
<div class="payment-section mt-4">
    <h3>ğŸ’¶ Zahlung vornehmen</h3>
    <p>Bitte wÃ¤hle eine Zahlungsmethode:</p>

    <form action="{{ url_for('mock_payment') }}" method="post">
        <select name="payment_method" class="form-control mb-3" required>
            <option value="">-- Zahlungsmethode auswÃ¤hlen --</option>
            <option value="credit_card">ğŸ’³ Kreditkarte</option>
            <option value="paypal">ğŸ…¿ï¸ PayPal</option>
            <option value="crypto">â‚¿ Krypto</option>
        </select>

        <button type="submit" class="btn btn-success">ğŸ›’ Zahlung abschlieÃŸen</button>
    </form>
</div>

<hr>

<a href="{{ url_for('landing_page') }}" class="btn btn-primary">ğŸ  ZurÃ¼ck zur Startseite</a>

{% endblock %}
